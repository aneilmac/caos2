mod base;
mod caos_agent;
mod caos_command;
mod caos_decimal;
mod caos_float;
mod caos_int;
mod caos_program;
mod caos_string;
mod caos_variable;
mod condition;
mod script;

use base::*;
use caos_agent::*;
use caos_command::*;
use caos_decimal::*;
use caos_float::*;
use caos_int::*;
use caos_program::*;
use caos_string::*;
use caos_variable::*;
use condition::*;
use script::*;

use crate::{
    ast::{CosFile, Label},
    CaosError, ErrorType,
};
use pest::{error::Error, iterators::Pair, pratt_parser::PrattParser, Parser};
use pest_derive::Parser;

#[derive(Parser)]
#[grammar = "grammar/base.pest"]
#[grammar = "grammar/caos_agent.pest"]
#[grammar = "grammar/caos_command.pest"]
#[grammar = "grammar/caos_decimal.pest"]
#[grammar = "grammar/caos_float.pest"]
#[grammar = "grammar/caos_int.pest"]
#[grammar = "grammar/caos_program.pest"]
#[grammar = "grammar/caos_string.pest"]
#[grammar = "grammar/caos_variable.pest"]
#[grammar = "grammar/condition.pest"]
#[grammar = "grammar/script.pest"]
struct CaosParser;

lazy_static::lazy_static! {
    static ref PRATT_PARSER: PrattParser<Rule> = {
        use pest::pratt_parser::{Assoc::*, Op};
        use Rule::*;

        PrattParser::new()
    };
}

// fn parse_cos_(pairs: Pairs<Rule>, pratt: &PrattParser<Rule>) ->  Result<i32, Error<Rule>>  {
//     pratt
//         .map_primary(|primary| match primary.as_rule() {
//             Rule::int_decimal => primary.as_str().parse(),
//             _ => panic!()
//         })
//         .parse(pairs)
// }

// pub fn parse_cos_pair(pair: Pair<Rule>) -> Result<CosFile, Error<Rule>>   {
//     match pair.as_rule() {
//         Rule::int_decimal => todo!(),
//         Rule::int_binary_prefix => todo!(),
//         Rule::int_binary => todo!(),
//         Rule::int_char_delimits => todo!(),
//         Rule::int_char_escape => todo!(),
//         Rule::int_character => todo!(),
//         Rule::literal_int => todo!(),
//         Rule::string_raw => todo!(),
//         Rule::string_content => todo!(),
//         Rule::literal_string => todo!(),
//         Rule::literal_byte_string => todo!(),
//         Rule::whole_number => todo!(),
//         Rule::decimal_part => todo!(),
//         Rule::literal_float => todo!(),
//         Rule::label => todo!(),
//         Rule::decimal => todo!(),
//         Rule::decimal_arg => todo!(),
//         Rule::agent_arg => todo!(),
//         Rule::agent => todo!(),
//         Rule::agent_carr => todo!(),
//         Rule::agent_from => todo!(),
//         Rule::agent_held => todo!(),
//         Rule::agent_iitt => todo!(),
//         Rule::agent_ncls => todo!(),
//         Rule::agent_null => todo!(),
//         Rule::agent_ownr => todo!(),
//         Rule::agent_pcls => todo!(),
//         Rule::agent_pntr => todo!(),
//         Rule::agent_targ => todo!(),
//         Rule::agent_twin => todo!(),
//         Rule::agent_it => todo!(),
//         Rule::agent_trck => todo!(),
//         Rule::agent_hhld => todo!(),
//         Rule::agent_norn => todo!(),
//         Rule::agent_agnt => todo!(),
//         Rule::agent_tack => todo!(),
//         Rule::agent_mtoa => todo!(),
//         Rule::agent_mtoc => todo!(),
//         Rule::agent_hots => todo!(),
//         Rule::agent_prt_frma => todo!(),
//         Rule::command => todo!(),
//         Rule::command_doif => todo!(),
//         Rule::command_elif => todo!(),
//         Rule::command_else => todo!(),
//         Rule::command_subr => todo!(),
//         Rule::command_reps => todo!(),
//         Rule::command_econ => todo!(),
//         Rule::command_enum => todo!(),
//         Rule::command_etch => todo!(),
//         Rule::command_esee => todo!(),
//         Rule::command_epass => todo!(),
//         Rule::command_loop_untl => todo!(),
//         Rule::command_loop_ever => todo!(),
//         Rule::command_anim => todo!(),
//         Rule::command_anms => todo!(),
//         Rule::command_attr => todo!(),
//         Rule::command_base => todo!(),
//         Rule::command_bhvr => todo!(),
//         Rule::command_frat => todo!(),
//         Rule::command_gait => todo!(),
//         Rule::command_gall => todo!(),
//         Rule::command_hand => todo!(),
//         Rule::command_kill => todo!(),
//         Rule::command_mesg_writ => todo!(),
//         Rule::command_mesg_wrt => todo!(),
//         Rule::command_mira => todo!(),
//         Rule::command_new_simp => todo!(),
//         Rule::command_nohh => todo!(),
//         Rule::command_over => todo!(),
//         Rule::command_paus => todo!(),
//         Rule::command_plne => todo!(),
//         Rule::command_pose => todo!(),
//         Rule::command_puhl => todo!(),
//         Rule::command_pupt => todo!(),
//         Rule::command_rnge => todo!(),
//         Rule::command_rtar => todo!(),
//         Rule::command_show => todo!(),
//         Rule::command_star => todo!(),
//         Rule::command_tick => todo!(),
//         Rule::command_tint => todo!(),
//         Rule::command_ttar => todo!(),
//         Rule::command_brn_dmpb => todo!(),
//         Rule::command_brn_dmpd => todo!(),
//         Rule::command_brn_dmpl => todo!(),
//         Rule::command_brn_dmpn => todo!(),
//         Rule::command_brn_dmpt => todo!(),
//         Rule::command_brn_setd => todo!(),
//         Rule::command_brn_setl => todo!(),
//         Rule::command_brn_setn => todo!(),
//         Rule::command_brn_sett => todo!(),
//         Rule::command_bkgd => todo!(),
//         Rule::command_brmi => todo!(),
//         Rule::command_cmra => todo!(),
//         Rule::command_cmrp => todo!(),
//         Rule::command_cmrt => todo!(),
//         Rule::command_frsh => todo!(),
//         Rule::command_line => todo!(),
//         Rule::command_meta => todo!(),
//         Rule::command_scam => todo!(),
//         Rule::command_snap => todo!(),
//         Rule::command_trck => todo!(),
//         Rule::command_wdow => todo!(),
//         Rule::command_zoom => todo!(),
//         Rule::command_fcus => todo!(),
//         Rule::command_frmt => todo!(),
//         Rule::command_grpl => todo!(),
//         Rule::command_grpv => todo!(),
//         Rule::command_new_comp => todo!(),
//         Rule::command_page => todo!(),
//         Rule::command_part => todo!(),
//         Rule::command_pat_butt => todo!(),
//         Rule::command_pat_cmra => todo!(),
//         Rule::command_pat_dull => todo!(),
//         Rule::command_pat_fixd => todo!(),
//         Rule::command_pat_grph => todo!(),
//         Rule::command_pat_kill => todo!(),
//         Rule::command_pat_text => todo!(),
//         Rule::command_ptxt => todo!(),
//         Rule::command_ages => todo!(),
//         Rule::command_apptr => todo!(),
//         Rule::command_aslp => todo!(),
//         Rule::command_body => todo!(),
//         Rule::command_born => todo!(),
//         Rule::command_chem => todo!(),
//         Rule::command_dead => todo!(),
//         Rule::command_dirn => todo!(),
//         Rule::command_done => todo!(),
//         Rule::command_drea => todo!(),
//         Rule::command_driv => todo!(),
//         Rule::command_face => todo!(),
//         Rule::command_forf => todo!(),
//         Rule::command_hair => todo!(),
//         Rule::command_injr => todo!(),
//         Rule::command_like => todo!(),
//         Rule::command_loci => todo!(),
//         Rule::command_ltcy => todo!(),
//         Rule::command_mate => todo!(),
//         Rule::command_mvft => todo!(),
//         Rule::command_new_crea => todo!(),
//         Rule::command_newc => todo!(),
//         Rule::command_norm => todo!(),
//         Rule::commmand_nude => todo!(),
//         Rule::commmand_ordr_shou => todo!(),
//         Rule::commmand_ordr_sign => todo!(),
//         Rule::commmand_ordr_writ => todo!(),
//         Rule::commmand_sayn => todo!(),
//         Rule::commmand_spnl => todo!(),
//         Rule::command_stim_shou => todo!(),
//         Rule::command_stim_sign => todo!(),
//         Rule::command_stim_tact => todo!(),
//         Rule::command_stim_writ => todo!(),
//         Rule::command_sway_shou => todo!(),
//         Rule::command_sway_sign => todo!(),
//         Rule::command_sway_tact => todo!(),
//         Rule::command_sway_writ => todo!(),
//         Rule::command_touc => todo!(),
//         Rule::command_uncs => todo!(),
//         Rule::command_urge_shou => todo!(),
//         Rule::command_urge_sign => todo!(),
//         Rule::command_urge_tact => todo!(),
//         Rule::command_urge_writ => todo!(),
//         Rule::command_vocb => todo!(),
//         Rule::command_walk => todo!(),
//         Rule::command_wear => todo!(),
//         Rule::command_zomb => todo!(),
//         Rule::command_apro => todo!(),
//         Rule::command_dbg_asrt => todo!(),
//         Rule::command_dbg_cpro => todo!(),
//         Rule::command_dbg_flsh => todo!(),
//         Rule::command_dbg_html => todo!(),
//         Rule::command_dbg_outs => todo!(),
//         Rule::command_dbg_outv => todo!(),
//         Rule::command_dbg_paws => todo!(),
//         Rule::command_dbg_play => todo!(),
//         Rule::command_dbg_poll => todo!(),
//         Rule::command_dbg_prof => todo!(),
//         Rule::command_dbg_tack => todo!(),
//         Rule::command_dbg_tock => todo!(),
//         Rule::command_dbg_wtik => todo!(),
//         Rule::command_help => todo!(),
//         Rule::command_mann => todo!(),
//         Rule::command_memx => todo!(),
//         Rule::command_file_glob => todo!(),
//         Rule::command_file_iclo => todo!(),
//         Rule::command_file_iope => todo!(),
//         Rule::command_file_jdel => todo!(),
//         Rule::command_file_oclo => todo!(),
//         Rule::command_file_oflu => todo!(),
//         Rule::command_file_oope => todo!(),
//         Rule::command_outs => todo!(),
//         Rule::command_outv => todo!(),
//         Rule::command_outx => todo!(),
//         Rule::command_goto => todo!(),
//         Rule::command_gsub => todo!(),
//         Rule::command_gene_clon => todo!(),
//         Rule::command_gene_cros => todo!(),
//         Rule::command_gene_kill => todo!(),
//         Rule::command_gene_load => todo!(),
//         Rule::command_gene_move => todo!(),
//         Rule::command_hist_evnt => todo!(),
//         Rule::command_hist_foto => todo!(),
//         Rule::command_hist_name => todo!(),
//         Rule::command_hist_utxt => todo!(),
//         Rule::command_hist_wipe => todo!(),
//         Rule::command_clac => todo!(),
//         Rule::command_clik => todo!(),
//         Rule::command_imsk => todo!(),
//         Rule::command_mous => todo!(),
//         Rule::command_pure => todo!(),
//         Rule::command_tran => todo!(),
//         Rule::command_addb => todo!(),
//         Rule::command_altr => todo!(),
//         Rule::command_calc => todo!(),
//         Rule::command_delm => todo!(),
//         Rule::command_delr => todo!(),
//         Rule::command_dmap => todo!(),
//         Rule::command_doca => todo!(),
//         Rule::command_door => todo!(),
//         Rule::command_emit => todo!(),
//         Rule::command_link => todo!(),
//         Rule::command_mapd => todo!(),
//         Rule::command_mapk => todo!(),
//         Rule::command_perm => todo!(),
//         Rule::command_prop => todo!(),
//         Rule::command_rate => todo!(),
//         Rule::command_rtyp => todo!(),
//         Rule::command_accg => todo!(),
//         Rule::command_aero => todo!(),
//         Rule::command_elas => todo!(),
//         Rule::command_flto => todo!(),
//         Rule::command_frel => todo!(),
//         Rule::command_fric => todo!(),
//         Rule::command_mvby => todo!(),
//         Rule::command_mvsf => todo!(),
//         Rule::command_mvto => todo!(),
//         Rule::command_velo => todo!(),
//         Rule::command_prt_bang => todo!(),
//         Rule::command_prt_inew => todo!(),
//         Rule::command_prt_izap => todo!(),
//         Rule::command_prt_join => todo!(),
//         Rule::command_prt_krak => todo!(),
//         Rule::command_prt_name => todo!(),
//         Rule::command_prt_onew => todo!(),
//         Rule::command_prt_otot => todo!(),
//         Rule::command_prt_ozap => todo!(),
//         Rule::command_prt_send => todo!(),
//         Rule::command_pray_grab => todo!(),
//         Rule::command_pray_refr => todo!(),
//         Rule::command_gids_fmly => todo!(),
//         Rule::command_gids_gnus => todo!(),
//         Rule::command_gids_root => todo!(),
//         Rule::command_gids_spec => todo!(),
//         Rule::command_inst => todo!(),
//         Rule::command_lock => todo!(),
//         Rule::command_scrx => todo!(),
//         Rule::command_slow => todo!(),
//         Rule::command_sorc => todo!(),
//         Rule::command_stop => todo!(),
//         Rule::command_stpt => todo!(),
//         Rule::command_unlk => todo!(),
//         Rule::command_wait => todo!(),
//         Rule::command_fade => todo!(),
//         Rule::command_mclr => todo!(),
//         Rule::command_midi => todo!(),
//         Rule::command_mmsc => todo!(),
//         Rule::command_rclr => todo!(),
//         Rule::command_rmsc => todo!(),
//         Rule::command_sezz => todo!(),
//         Rule::command_sndc => todo!(),
//         Rule::command_snde => todo!(),
//         Rule::command_sndl => todo!(),
//         Rule::command_sndq => todo!(),
//         Rule::command_stpc => todo!(),
//         Rule::command_strk => todo!(),
//         Rule::command_voic => todo!(),
//         Rule::command_vois => todo!(),
//         Rule::command_volm => todo!(),
//         Rule::command_wpau => todo!(),
//         Rule::command_absv => todo!(),
//         Rule::command_adds => todo!(),
//         Rule::command_addv => todo!(),
//         Rule::command_andv => todo!(),
//         Rule::command_char => todo!(),
//         Rule::command_delg => todo!(),
//         Rule::command_divv => todo!(),
//         Rule::command_modv => todo!(),
//         Rule::command_mulv => todo!(),
//         Rule::command_negv => todo!(),
//         Rule::command_orrv => todo!(),
//         Rule::command_reaf => todo!(),
//         Rule::command_seta => todo!(),
//         Rule::command_sets => todo!(),
//         Rule::command_setv => todo!(),
//         Rule::command_subv => todo!(),
//         Rule::command_targ => todo!(),
//         Rule::command_cabn => todo!(),
//         Rule::command_cabp => todo!(),
//         Rule::command_cabv => todo!(),
//         Rule::command_cabw => todo!(),
//         Rule::command_dpas => todo!(),
//         Rule::command_gpas => todo!(),
//         Rule::command_new_vhcl => todo!(),
//         Rule::command_rpas => todo!(),
//         Rule::command_spas => todo!(),
//         Rule::command_delw => todo!(),
//         Rule::command_load => todo!(),
//         Rule::command_pswd => todo!(),
//         Rule::command_quit => todo!(),
//         Rule::command_rgam => todo!(),
//         Rule::command_save => todo!(),
//         Rule::command_tntx => todo!(),
//         Rule::command_wrld => todo!(),
//         Rule::command_wtnt => todo!(),
//         Rule::float_arg => todo!(),
//         Rule::float => todo!(),
//         Rule::float_disq => todo!(),
//         Rule::float_fltx => todo!(),
//         Rule::float_flty => todo!(),
//         Rule::float_mthx => todo!(),
//         Rule::float_mthy => todo!(),
//         Rule::float_posb => todo!(),
//         Rule::float_posl => todo!(),
//         Rule::float_posr => todo!(),
//         Rule::float_post => todo!(),
//         Rule::float_posx => todo!(),
//         Rule::float_posy => todo!(),
//         Rule::float_rnge => todo!(),
//         Rule::float_chem => todo!(),
//         Rule::float_dftx => todo!(),
//         Rule::float_dfty => todo!(),
//         Rule::float_driv => todo!(),
//         Rule::float_loci => todo!(),
//         Rule::float_orgf => todo!(),
//         Rule::float_uftx => todo!(),
//         Rule::float_ufty => todo!(),
//         Rule::float_innf => todo!(),
//         Rule::float_movx => todo!(),
//         Rule::float_movy => todo!(),
//         Rule::float_prop => todo!(),
//         Rule::float_torx => todo!(),
//         Rule::float_tory => todo!(),
//         Rule::float_accg => todo!(),
//         Rule::float_obst => todo!(),
//         Rule::float_relx => todo!(),
//         Rule::float_rely => todo!(),
//         Rule::float_pace => todo!(),
//         Rule::float_acos => todo!(),
//         Rule::float_asin => todo!(),
//         Rule::float_atan => todo!(),
//         Rule::float_cos => todo!(),
//         Rule::float_itof => todo!(),
//         Rule::float_sin => todo!(),
//         Rule::float_sqrt => todo!(),
//         Rule::float_stof => todo!(),
//         Rule::float_tan => todo!(),
//         Rule::int_arg => todo!(),
//         Rule::int => todo!(),
//         Rule::int_attr => todo!(),
//         Rule::int_base => todo!(),
//         Rule::int_bhvr => todo!(),
//         Rule::int_cati => todo!(),
//         Rule::int_clac => todo!(),
//         Rule::int_clik => todo!(),
//         Rule::int_fmly => todo!(),
//         Rule::int_gnus => todo!(),
//         Rule::int_hght => todo!(),
//         Rule::int_imsk => todo!(),
//         Rule::int_mira => todo!(),
//         Rule::int_mows => todo!(),
//         Rule::int_paus => todo!(),
//         Rule::int_plne => todo!(),
//         Rule::int_pose => todo!(),
//         Rule::int_puhl => todo!(),
//         Rule::int_pupt => todo!(),
//         Rule::int_seee => todo!(),
//         Rule::int_spcs => todo!(),
//         Rule::int_tick => todo!(),
//         Rule::int_totl => todo!(),
//         Rule::int_touc => todo!(),
//         Rule::int_visi => todo!(),
//         Rule::int_wdth => todo!(),
//         Rule::int_cmrx => todo!(),
//         Rule::int_cmry => todo!(),
//         Rule::int_loft => todo!(),
//         Rule::int_meta => todo!(),
//         Rule::int_snax => todo!(),
//         Rule::int_wdow => todo!(),
//         Rule::int_wndb => todo!(),
//         Rule::int_wndh => todo!(),
//         Rule::int_wndl => todo!(),
//         Rule::int_wndr => todo!(),
//         Rule::int_wndt => todo!(),
//         Rule::int_wndw => todo!(),
//         Rule::int_npgs => todo!(),
//         Rule::int_page => todo!(),
//         Rule::int_aslp => todo!(),
//         Rule::int_attn => todo!(),
//         Rule::int_body => todo!(),
//         Rule::int_bvar => todo!(),
//         Rule::int_byit => todo!(),
//         Rule::int_cage => todo!(),
//         Rule::int_crea => todo!(),
//         Rule::int_dead => todo!(),
//         Rule::int_decn => todo!(),
//         Rule::int_dirn => todo!(),
//         Rule::int_drea => todo!(),
//         Rule::int_drv => todo!(),
//         Rule::int_expr => todo!(),
//         Rule::int_face => todo!(),
//         Rule::int_ins => todo!(),
//         Rule::int_orgi => todo!(),
//         Rule::int_orgn => todo!(),
//         Rule::int_tage => todo!(),
//         Rule::int_uncs => todo!(),
//         Rule::int_zomb => todo!(),
//         Rule::int_code => todo!(),
//         Rule::int_codf => todo!(),
//         Rule::int_codg => todo!(),
//         Rule::int_codp => todo!(),
//         Rule::int_cods => todo!(),
//         Rule::int_heap => todo!(),
//         Rule::int_paws => todo!(),
//         Rule::int_unid => todo!(),
//         Rule::int_inni => todo!(),
//         Rule::int_inok => todo!(),
//         Rule::int_hist_cage => todo!(),
//         Rule::int_hist_coun => todo!(),
//         Rule::int_hist_cros => todo!(),
//         Rule::int_hist_find => todo!(),
//         Rule::int_hist_finr => todo!(),
//         Rule::int_hist_gend => todo!(),
//         Rule::int_hist_gnus => todo!(),
//         Rule::int_hist_mute => todo!(),
//         Rule::int_hist_prev => todo!(),
//         Rule::int_hist_rtim => todo!(),
//         Rule::int_hist_tage => todo!(),
//         Rule::int_hist_type => todo!(),
//         Rule::int_hist_vari => todo!(),
//         Rule::int_hist_wnam => todo!(),
//         Rule::int_hist_wtik => todo!(),
//         Rule::int_hist_wuid => todo!(),
//         Rule::int_ooww => todo!(),
//         Rule::int_keyd => todo!(),
//         Rule::int_mopx => todo!(),
//         Rule::int_mopy => todo!(),
//         Rule::int_pure => todo!(),
//         Rule::int_addm => todo!(),
//         Rule::int_addr => todo!(),
//         Rule::int_door => todo!(),
//         Rule::int_down => todo!(),
//         Rule::int_gmap => todo!(),
//         Rule::int_grap => todo!(),
//         Rule::int_grid => todo!(),
//         Rule::int_hirp => todo!(),
//         Rule::int_left => todo!(),
//         Rule::int_link => todo!(),
//         Rule::int_lorp => todo!(),
//         Rule::int_maph => todo!(),
//         Rule::int_mapk => todo!(),
//         Rule::int_mapw => todo!(),
//         Rule::int_perm => todo!(),
//         Rule::int_rght => todo!(),
//         Rule::int_room => todo!(),
//         Rule::int_rtyp => todo!(),
//         Rule::int_up => todo!(),
//         Rule::int_aero => todo!(),
//         Rule::int_elas => todo!(),
//         Rule::int_fall => todo!(),
//         Rule::int_fric => todo!(),
//         Rule::int_movs => todo!(),
//         Rule::int_tmvb => todo!(),
//         Rule::int_tmvh => todo!(),
//         Rule::int_tmvt => todo!(),
//         Rule::int_wall => todo!(),
//         Rule::int_pray_agti => todo!(),
//         Rule::int_pray_coun => todo!(),
//         Rule::int_pray_deps => todo!(),
//         Rule::int_pray_expo => todo!(),
//         Rule::int_pray_file => todo!(),
//         Rule::int_pray_impo => todo!(),
//         Rule::int_pray_injt => todo!(),
//         Rule::int_pray_make => todo!(),
//         Rule::int_pray_size => todo!(),
//         Rule::int_pray_test => todo!(),
//         Rule::int_sorq => todo!(),
//         Rule::int_mute => todo!(),
//         Rule::int_date => todo!(),
//         Rule::int_dayt => todo!(),
//         Rule::int_etik => todo!(),
//         Rule::int_hist_date => todo!(),
//         Rule::int_hist_sean => todo!(),
//         Rule::int_hist_time => todo!(),
//         Rule::int_hist_year => todo!(),
//         Rule::int_mont => todo!(),
//         Rule::int_msec => todo!(),
//         Rule::int_race => todo!(),
//         Rule::int_rtim => todo!(),
//         Rule::int_scol => todo!(),
//         Rule::int_sean => todo!(),
//         Rule::int_time => todo!(),
//         Rule::int_wolf => todo!(),
//         Rule::int_wpau => todo!(),
//         Rule::int_wtik => todo!(),
//         Rule::int_year => todo!(),
//         Rule::int_char => todo!(),
//         Rule::int_ftoi => todo!(),
//         Rule::int_rand => todo!(),
//         Rule::int_rean => todo!(),
//         Rule::int_reaq => todo!(),
//         Rule::int_stoi => todo!(),
//         Rule::int_strl => todo!(),
//         Rule::int_type => todo!(),
//         Rule::int_vmjr => todo!(),
//         Rule::int_vmnr => todo!(),
//         Rule::int_cabb => todo!(),
//         Rule::int_cabl => todo!(),
//         Rule::int_cabp => todo!(),
//         Rule::int_cabr => todo!(),
//         Rule::int_cabt => todo!(),
//         Rule::int_cabv => todo!(),
//         Rule::int_nwld => todo!(),
//         Rule::int_wnti => todo!(),
//         Rule::int_prt_itot => todo!(),
//         Rule::int_ptr_from => todo!(),
//         Rule::program => todo!(),
//         Rule::string_arg => todo!(),
//         Rule::string => todo!(),
//         Rule::string_catx => todo!(),
//         Rule::string_hand => todo!(),
//         Rule::string_wild => todo!(),
//         Rule::string_bkd => todo!(),
//         Rule::string_ptxt => todo!(),
//         Rule::string_face => todo!(),
//         Rule::string_dbg => todo!(),
//         Rule::string_dbga => todo!(),
//         Rule::string_fvwm => todo!(),
//         Rule::string_innl => todo!(),
//         Rule::string_gtos => todo!(),
//         Rule::string_hist_foto => todo!(),
//         Rule::string_hist_mon1 => todo!(),
//         Rule::string_hist_mon2 => todo!(),
//         Rule::string_hist_name => todo!(),
//         Rule::string_hist_next => todo!(),
//         Rule::string_hist_prev => todo!(),
//         Rule::string_hist_utxt => todo!(),
//         Rule::string_hist_wnam => todo!(),
//         Rule::string_bkds => todo!(),
//         Rule::string_emid => todo!(),
//         Rule::string_erid => todo!(),
//         Rule::string_mloc => todo!(),
//         Rule::string_rate => todo!(),
//         Rule::string_rloc => todo!(),
//         Rule::string_pray_agts => todo!(),
//         Rule::string_pray_next => todo!(),
//         Rule::string_pray_prev => todo!(),
//         Rule::string_caos => todo!(),
//         Rule::string_rmsc => todo!(),
//         Rule::string_vois => todo!(),
//         Rule::string_rtif => todo!(),
//         Rule::string_gamn => todo!(),
//         Rule::string_gnam => todo!(),
//         Rule::string_read => todo!(),
//         Rule::string_subs => todo!(),
//         Rule::string_vtos => todo!(),
//         Rule::string_pswd => todo!(),
//         Rule::string_wnam => todo!(),
//         Rule::string_wrld => todo!(),
//         Rule::string_wuid => todo!(),
//         Rule::variable => todo!(),
//         Rule::variable_mvxx => todo!(),
//         Rule::variable_ovxx => todo!(),
//         Rule::variable_vaxx => todo!(),
//         Rule::variable_velx => todo!(),
//         Rule::variable_vely => todo!(),
//         Rule::variable_avar => todo!(),
//         Rule::variable_game => todo!(),
//         Rule::varaible_p1 => todo!(),
//         Rule::variable_p2 => todo!(),
//         Rule::condition => todo!(),
//         Rule::simple_condition => todo!(),
//         Rule::anything => todo!(),
//         Rule::condition_eq => todo!(),
//         Rule::condition_ge => todo!(),
//         Rule::condition_gt => todo!(),
//         Rule::condition_le => todo!(),
//         Rule::condition_ne => todo!(),
//         Rule::condition_lt => todo!(),
//         Rule::condition_operator => todo!(),
//         Rule::condition_and => todo!(),
//         Rule::condition_or => todo!(),
//         Rule::condition_join => todo!(),
//         Rule::end_script_tag => todo!(),
//         Rule::install_script_start_tag => todo!(),
//         Rule::install_script_end_tag => todo!(),
//         Rule::remove_script_start_tag => todo!(),
//         Rule::remove_script_end_tag => todo!(),
//         Rule::event_script_start_tag => todo!(),
//         Rule::install_script => todo!(),
//         Rule::remove_script => todo!(),
//         Rule::event_script => todo!(),
//         Rule::event_script_header => todo!(),
//         Rule::script_contents => todo!(),
//         Rule::EOI
//         | Rule::WHITESPACE
//         | Rule::COMMENT => unreachable!()

//     }
// }

pub fn parse_cos(cos_content: &str) -> Result<CosFile, CaosError> {
    let res = CaosParser::parse(Rule::program, cos_content)
        .map_err(|e| CaosError::new_from_error(Box::new(e)))?
        .next()
        .ok_or(CaosError::new(
            ErrorType::ParseError { line: 0, col: 0 },
            String::from("Unknown parsing error"),
        ))?;
    parse_program(res)
}
